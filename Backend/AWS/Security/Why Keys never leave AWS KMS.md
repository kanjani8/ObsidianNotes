AWS KMS(Amazon Web Services Key Management Service)가 "키는 절대 AWS KMS를 떠나지 않으며, 고객이 항상 키를 제어할 수 있다"고 말할 수 있는 이유

---

### 1. 키는 AWS KMS를 떠나지 않음

- **KMS 내부에서 암호화 수행**:
    - 데이터 암호화 및 복호화 작업은 모두 **AWS KMS 내부**에서 수행됩니다. 사용자가 데이터를 암호화하거나 복호화하려고 요청하면, 키 자체는 외부로 노출되지 않고 KMS 내부에서 처리됩니다.
- **HSM(Hardware Security Module) 사용**:
    - AWS KMS는 **HSM(하드웨어 보안 모듈, FIPS 140-2 레벨 3 인증)**을 사용하여 키를 저장하고 관리합니다. HSM은 키를 외부로 내보낼 수 없도록 설계되어 있어 AWS 직원조차 키를 가져갈 수 없습니다.
- **키 별칭(Key Alias)와 메타데이터**:
    - 사용자는 키 자체가 아닌 **키 별칭(Alias)**과 메타데이터를 통해 키에 접근합니다. 이렇게 하면 키 자체는 KMS 내부에서만 안전하게 유지됩니다.

---

### 2. 고객이 항상 제어 가능

- **키 정책(Key Policies)**:
    - 고객은 키 정책을 통해 누가 어떤 방식으로 키를 사용할 수 있는지 제어할 수 있습니다. 예:
        - 특정 IAM 사용자 또는 역할(Role)에 대한 접근 권한을 설정.
        - AWS Organizations를 이용해 중앙에서 정책 관리.
- **일시적인 권한 부여(Grants)**:
    - KMS는 키에 대한 접근 권한을 **일시적으로 제한**하여 필요한 경우에만 특정 권한을 부여할 수 있습니다.
- **키 관리 작업**:
    - 키 생성, 비활성화, 삭제 등 모든 작업은 고객이 직접 제어하며, AWS가 이를 대신 수행하지 않습니다.
- **감사 로그(CloudTrail)**:
    - 키와 관련된 모든 작업은 **AWS CloudTrail**에 기록되어 누가 어떤 작업을 했는지 투명하게 확인 가능합니다.

---

### 3. 키 분리 및 격리

- **고유 키 자료**:
    - AWS KMS의 각 고객 마스터 키(CMK)는 고유하며, 고객 간 키가 공유되지 않습니다.
- **고객 관리 키(Customer-Managed Keys)**:
    - 고객은 직접 키를 생성하거나 외부에서 생성한 키 자료를 KMS에 가져와 사용할 수도 있습니다. 이를 통해 키 생애주기를 완전히 제어할 수 있습니다.

---

### 4. 제로 트러스트(Zero Trust) 아키텍처

- **서비스 간 암호화**:
    - ==S3, RDS, Lambda 등 KMS와 통합된 AWS 서비스는 KMS에서 키를 가져오는 대신, 암호화된 데이터를 KMS로 전달==합니다. KMS 내부에서 데이터를 처리한 후 결과를 반환하기 때문에 키는 서비스에 노출되지 않습니다.
- **인간 접근 불가**:
    - AWS 직원도 키 자료에 접근할 수 없으며, HSM은 물리적, 논리적 접근이 모두 차단되도록 설계되어 있습니다.

---

### **5. 규정 준수 및 인증**

- AWS KMS는 FIPS 140-2, PCI DSS, HIPAA 등 여러 보안 표준을 준수합니다.
- 이러한 인증은 KMS가 엄격한 암호화 보안 요구 사항을 충족한다는 것을 보장합니다.

---

### **작동 방식 예시**

1. **데이터 암호화**:
    - 사용자는 평문 데이터를 AWS KMS에 보내고, 키 별칭(Alias)을 참조합니다.
    - KMS는 **HSM 내부**에서 데이터를 암호화한 후 암호화된 데이터를 반환합니다. 키는 절대 KMS를 떠나지 않습니다.
2. **데이터 복호화**:
    - 사용자는 암호화된 데이터를 KMS로 보내고, 키 별칭(Alias)을 참조합니다.
    - KMS는 암호화를 해제하고 평문 데이터를 반환합니다. 이 과정에서도 키는 외부로 노출되지 않습니다.

---

### **이것이 가능한 이유**

- **AWS KMS의 보안 설계**:
    - HSM과 키 정책 등 모든 설계 요소가 키 자료의 안전한 저장과 제어를 보장합니다.
- **철저한 접근 제어**:
    - 고객이 키의 모든 사용 및 관리를 정책과 로그로 제어할 수 있도록 설계되어 있습니다.

---

AWS KMS는 키 관리의 보안성과 투명성을 결합해 고객이 클라우드 환경에서 신뢰할 수 있는 암호화 작업을 수행하도록 돕습니다. 추가로 궁금한 점이 있으면 말씀해주세요! 😊